(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{255:(e,t,r)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),r(5155),r(7650),r(5744),r(589)},1021:(e,t,r)=>{Promise.resolve().then(r.bind(r,6787))},2146:(e,t,r)=>{"use strict";function a(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),r(5262)},2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3904:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return o}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let s="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return s?new s:new a}function i(e){return s?s.bind(e):a.bind(e)}function o(){return s?s.snapshot():function(e,...t){return e(...t)}}},4229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4416:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5028:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(6645),s=r.n(a)},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},5744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=r(7828)},5899:(e,t,r)=>{"use strict";r.d(t,{ToastProvider:()=>i,d:()=>o});var a=r(5155),s=r(2115);let n=(0,s.createContext)(),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)([]),o=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,a.jsxs)(n.Provider,{value:{addToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=Date.now()+Math.random();i(a=>[...a,{id:r,message:e,type:t}]),setTimeout(()=>{o(r)},3e3)}},children:[t,(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(e=>(0,a.jsx)("div",{className:"px-4 py-3 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 ".concat("success"===e.type?"bg-green-500 text-white":"error"===e.type?"bg-red-500 text-white":"bg-vibe-cookie text-vibe-brown"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.message}),(0,a.jsx)("button",{onClick:()=>o(e.id),className:"ml-4 text-white hover:text-gray-200",children:"\xd7"})]})},e.id))})]})},o=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useToast must be used within a ToastProvider");return e}},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let a=r(8229)._(r(7357));function s(e,t){var r;let s={};"function"==typeof e&&(s.loader=e);let n={...s,...t};return(0,a.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6787:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(5155),s=r(5028),n=r(2115),i=r(5695),o=r(3904),c=r(4616),l=r(4229),d=r(4416),u=r(9946);let m=(0,u.A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),h=(0,u.A)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),p=(0,u.A)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);var x=r(2525),f=r(5899);let g=()=>{let e=(0,i.useRouter)(),{addToast:t}=(0,f.d)(),[r,s]=(0,n.useState)(null),[u,g]=(0,n.useState)(!0),[b,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)([]),[w,k]=(0,n.useState)({name:"",description:"",image:""}),[N,A]=(0,n.useState)(!1),[C,S]=(0,n.useState)(null),[P,_]=(0,n.useState)({name:"",description:"",image:""}),O="https://vibebitstest-env.eba-ubvupniq.ap-south-1.elasticbeanstalk.com/api",M=()=>{if("undefined"==typeof localStorage)return{"Content-Type":"application/json"};let e=localStorage.getItem("token");return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}};(0,n.useEffect)(()=>{y(!0)},[]),(0,n.useEffect)(()=>{b&&(async()=>{try{if(!("undefined"!=typeof localStorage?localStorage.getItem("token"):null))return void e.push("/login");let r=await fetch("".concat(O,"/auth/me"),{headers:M()});if(!r.ok)throw Error("Auth failed");let a=await r.json();a.success&&"admin"===a.data.role?(s(a.data),g(!1)):(t("Admin access required","error"),e.push("/"))}catch(t){e.push("/login")}})()},[b,O,e,t]),(0,n.useEffect)(()=>{r&&T()},[r,T]);let T=(0,n.useCallback)(async()=>{try{let e=await fetch("".concat(O,"/categories/all"),{headers:M()});if(e.ok){let t=await e.json();j(t.data.categories)}}catch(e){t("Error loading categories","error")}},[O,t]),E=async e=>{if(e.preventDefault(),!w.name.trim())return t("Name required","error");A(!0);try{let e={name:w.name.trim(),...w.description.trim()&&{description:w.description.trim()},...w.image.trim()&&{image:w.image.trim()}},r=await fetch("".concat(O,"/categories"),{method:"POST",headers:{"Content-Type":"application/json"},headers:M(),body:JSON.stringify(e),headers:M()}),a=await r.json();r.ok&&a.success?(t("Category created","success"),k({name:"",description:"",image:""}),T()):t(a.message||"Create failed","error")}catch(e){t("Create failed","error")}finally{A(!1)}},L=()=>{S(null),_({name:"",description:"",image:""})},R=async e=>{try{let r={name:P.name.trim(),...P.description.trim()&&{description:P.description.trim()},...P.image.trim()&&{image:P.image.trim()}},a=await fetch("".concat(O,"/categories/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},headers:M(),body:JSON.stringify(r),headers:M()}),s=await a.json();a.ok&&s.success?(t("Category updated","success"),L(),T()):t(s.message||"Update failed","error")}catch(e){t("Update failed","error")}},D=async e=>{try{(await fetch("".concat(O,"/categories/").concat(e._id,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},headers:M(),body:JSON.stringify({isActive:!e.isActive}),headers:M()})).ok?(t("Status updated","success"),T()):t("Status change failed","error")}catch(e){t("Status change failed","error")}},I=async e=>{if(confirm("Delete this category?"))try{(await fetch("".concat(O,"/categories/").concat(e),{method:"DELETE",headers:M()})).ok?(t("Category deleted","success"),T()):t("Delete failed","error")}catch(e){t("Delete failed","error")}};return!b||u?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-vibe-bg text-vibe-brown",children:"Loading..."}):(0,a.jsxs)("div",{className:"min-h-screen bg-vibe-bg px-4 py-8 max-w-5xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("a",{href:"/admin",children:(0,a.jsx)("button",{style:{padding:"0.5rem 1rem",background:"#2563eb",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"â† Back to Dashboard"})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-vibe-brown",children:"Category Management"}),(0,a.jsxs)("button",{onClick:T,className:"flex items-center space-x-2 px-4 py-2 rounded-md bg-white border border-vibe-cookie text-vibe-brown hover:bg-vibe-cookie/30 transition-colors",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"})," ",(0,a.jsx)("span",{children:"Refresh"})]})]}),(0,a.jsxs)("form",{onSubmit:E,className:"bg-white border border-vibe-cookie rounded-lg p-6 mb-10 shadow-sm space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-vibe-brown flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-5 w-5"})," Add New Category"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Name",value:w.name,onChange:e=>k({...w,name:e.target.value}),className:"px-3 py-2 border border-vibe-cookie rounded-md focus:outline-none focus:ring-2 focus:ring-vibe-cookie",required:!0}),(0,a.jsx)("input",{type:"text",placeholder:"Image URL (optional)",value:w.image,onChange:e=>k({...w,image:e.target.value}),className:"px-3 py-2 border border-vibe-cookie rounded-md focus:outline-none focus:ring-2 focus:ring-vibe-cookie"}),(0,a.jsx)("input",{type:"text",placeholder:"Short Description (optional)",value:w.description,onChange:e=>k({...w,description:e.target.value}),className:"px-3 py-2 border border-vibe-cookie rounded-md focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]}),(0,a.jsx)("button",{disabled:N,type:"submit",className:"px-5 py-2 bg-vibe-cookie text-vibe-brown font-medium rounded-md hover:bg-vibe-brown hover:text-white transition-colors disabled:opacity-50",children:N?"Creating...":"Create Category"})]}),(0,a.jsx)("div",{className:"bg-white border border-vibe-cookie rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[v.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-vibe-cookie/10",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-vibe-brown",children:C===e._id?(0,a.jsx)("input",{value:P.name,onChange:e=>_({...P,name:e.target.value}),className:"px-2 py-1 border border-vibe-cookie rounded"}):e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 max-w-xs",children:C===e._id?(0,a.jsx)("input",{value:P.description,onChange:e=>_({...P,description:e.target.value}),className:"w-full px-2 py-1 border border-vibe-cookie rounded"}):e.description||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:C===e._id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>R(e._id),className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200",children:(0,a.jsx)(l.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:L,className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>(e=>{S(e._id),_({name:e.name,description:e.description||"",image:e.image||""})})(e),className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200",children:(0,a.jsx)(m,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>D(e),className:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200",children:e.isActive?(0,a.jsx)(h,{className:"h-4 w-4"}):(0,a.jsx)(p,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>I(e._id),className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 rounded hover:bg-red-200",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]})})]},e._id)),0===v.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"px-6 py-6 text-center text-sm text-gray-500",children:"No categories yet."})})]})]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-6",children:"Note: Product schema still uses a fixed enum for categories; newly created categories here won't be usable for products until that enum is updated (left unchanged as requested)."})]})},b=(0,s.default)(()=>Promise.resolve(g),{ssr:!1})},7357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=r(5155),s=r(2115),n=r(2146);function i(e){return{default:e&&"default"in e?e.default:e}}r(255);let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},r=(0,s.lazy)(()=>t.loader().then(i)),c=t.loading;function l(e){let i=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,l=o?s.Suspense:s.Fragment,d=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(l,{...o?{fallback:i}:{},children:d})}return l.displayName="LoadableComponent",l}},7828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,r(4054).createAsyncLocalStorage)()},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2115);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:l="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:i,height:i,stroke:r,strokeWidth:c?24*Number(o)/Number(i):o,className:s("lucide",l),...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...c}=r;return(0,a.createElement)(i,{ref:n,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...c})});return r.displayName="".concat(e),r}}},e=>{e.O(0,[441,964,358],()=>e(e.s=1021)),_N_E=e.O()}]);