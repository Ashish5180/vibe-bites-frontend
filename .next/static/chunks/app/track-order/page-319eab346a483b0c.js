(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[419],{646:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1154:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3952:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>v});var t=s(5155),i=s(2115),a=s(5695),l=s(6766),n=s(2971),d=s(454),c=s(5899),o=s(4186),m=s(646),x=s(7108),h=s(9799),b=s(4516),p=s(1154),u=s(7924);function g(){var e;(0,a.useRouter)();let r=(0,a.useSearchParams)(),{addToast:s}=(0,c.d)(),[g,v]=(0,i.useState)(""),[j,f]=(0,i.useState)(null),[w,N]=(0,i.useState)(!1),y=()=>{let e=localStorage.getItem("token");return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}};(0,i.useEffect)(()=>{let e=r.get("orderId");e&&v(e)},[r]);let k=async e=>{if(e.preventDefault(),!g.trim())return void s("Please enter an order ID","error");N(!0);try{let e=await fetch("https://vibe-bites-backend.onrender.com/api/orders/".concat(g,"/track")),r=await e.json();e.ok&&r.success?f(r.data):(s(r.message||"Order not found","error"),f(null))}catch(e){console.error("Track order error:",e),s("Network error. Please try again.","error"),f(null)}finally{N(!1)}},A=e=>e?new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",S=async e=>{let r=prompt("Please select a reason for cancellation:\n1. Changed mind\n2. Wrong item\n3. Defective\n4. Late delivery\n5. Other\n\nEnter the number (1-5):");if(!r||!["1","2","3","4","5"].includes(r))return void s("Please select a valid reason","error");let t=prompt("Please provide additional details (optional):")||"";try{localStorage.getItem("token");let i=await fetch("https://vibe-bites-backend.onrender.com/api/orders/".concat(e,"/cancel"),{method:"POST",headers:{"Content-Type":"application/json"},headers:y(),body:JSON.stringify({reason:{1:"changed_mind",2:"wrong_item",3:"defective",4:"late_delivery",5:"other"}[r],description:t})});if(i.ok)s("Order cancelled successfully","success"),k({preventDefault:()=>{}});else{let e=await i.json();s(e.message||"Error cancelling order","error")}}catch(e){console.error("Cancel order error:",e),s("Error cancelling order","error")}},O=async(e,r)=>{let t=prompt("Please rate ".concat(r," (1-5 stars):\n1 = Poor\n2 = Fair\n3 = Good\n4 = Very Good\n5 = Excellent\n\nEnter a number (1-5):"));if(!t||!["1","2","3","4","5"].includes(t))return void s("Please enter a valid rating (1-5)","error");let i=prompt("Please enter a review title (5-100 characters):");if(!i||i.length<5||i.length>100)return void s("Please enter a valid title (5-100 characters)","error");let a=prompt("Please write your review (10-500 characters):");if(!a||a.length<10||a.length>500)return void s("Please enter a valid review (10-500 characters)","error");try{localStorage.getItem("token");let r=await fetch("https://vibe-bites-backend.onrender.com/api/reviews/order/".concat(j.order._id),{method:"POST",headers:{"Content-Type":"application/json"},headers:y(),body:JSON.stringify({productId:e,rating:parseInt(t),title:i,comment:a})});if(r.ok)s("Review submitted successfully! Thank you for your feedback.","success"),k({preventDefault:()=>{}});else{let e=await r.json();s(e.message||"Error submitting review","error")}}catch(e){console.error("Review submission error:",e),s("Error submitting review","error")}};return(0,t.jsxs)("div",{className:"min-h-screen bg-vibe-bg",children:[(0,t.jsx)(n.default,{}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-vibe-brown",children:"Track Your Order"}),(0,t.jsx)("p",{className:"mt-2 text-vibe-brown/70",children:"Enter your order ID to track your package"})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:(0,t.jsxs)("form",{onSubmit:k,className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{htmlFor:"orderId",className:"block text-sm font-medium text-vibe-brown mb-2",children:"Order ID"}),(0,t.jsx)("input",{type:"text",id:"orderId",value:g,onChange:e=>v(e.target.value),placeholder:"Enter your order ID (e.g., VB-2024-001)",className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)("button",{type:"submit",disabled:w,className:"px-6 py-2 bg-vibe-cookie text-white rounded-lg hover:bg-vibe-brown focus:outline-none focus:ring-2 focus:ring-vibe-cookie disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:w?(0,t.jsx)(p.A,{className:"h-5 w-5 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"h-5 w-5 mr-2"}),"Track"]})})})]})}),j&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-4",children:"Order Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-vibe-brown/70",children:"Order Number"}),(0,t.jsx)("p",{className:"font-semibold text-vibe-brown",children:j.order.orderNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-vibe-brown/70",children:"Order Total"}),(0,t.jsxs)("p",{className:"font-semibold text-vibe-brown",children:["₹",j.order.total]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-vibe-brown/70",children:"Order Date"}),(0,t.jsx)("p",{className:"font-semibold text-vibe-brown",children:A(j.order.createdAt)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-vibe-brown/70",children:"Status"}),(0,t.jsx)("p",{className:"font-semibold text-vibe-brown capitalize",children:j.order.orderStatus})]})]}),(null==(e=j.order.shippingDetails)?void 0:e.trackingNumber)&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-vibe-bg rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-vibe-brown/70",children:"Tracking Number"}),(0,t.jsx)("p",{className:"font-semibold text-vibe-brown",children:j.order.shippingDetails.trackingNumber}),j.order.shippingDetails.carrier&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-sm text-vibe-brown/70 mt-2",children:"Carrier"}),(0,t.jsx)("p",{className:"font-semibold text-vibe-brown",children:j.order.shippingDetails.carrier})]})]})]}),j&&(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-4",children:"Order Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[["pending","confirmed","processing"].includes(j.order.orderStatus)&&!j.order.cancelRequest&&(0,t.jsx)("button",{onClick:()=>S(j.order._id),className:"px-6 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",children:"Request Cancellation"}),j.order.cancelRequest&&(0,t.jsxs)("div",{className:"px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:["✅ Order Cancelled - ",j.order.cancelRequest.reason]})]})]}),j&&"delivered"===j.order.orderStatus&&(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-4",children:"Leave a Review"}),(0,t.jsx)("p",{className:"text-vibe-brown/70 mb-4",children:"How was your experience with this order? Your feedback helps us improve!"}),j.order.items.map((e,r)=>(0,t.jsxs)("div",{className:"mb-6 p-4 bg-vibe-bg rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex-shrink-0",children:e.image&&(0,t.jsx)(l.default,{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded-lg",width:64,height:64})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-vibe-brown",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-vibe-brown/70",children:["Size: ",e.size," | Quantity: ",e.quantity]})]})]}),(0,t.jsx)("button",{onClick:()=>O(e.product._id,e.name),className:"px-4 py-2 bg-vibe-cookie text-white rounded-lg hover:bg-vibe-brown focus:outline-none focus:ring-2 focus:ring-vibe-cookie transition-colors",children:"Review This Product"})]},r))]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-6",children:"Order Timeline"}),(0,t.jsx)("div",{className:"space-y-6",children:j.timeline.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ".concat(e.completed?"bg-green-100":"bg-gray-100"),children:((e,r)=>{let s="h-6 w-6 ".concat(r?"text-green-600":"text-gray-400");switch(e){case"pending":default:return(0,t.jsx)(o.A,{className:s});case"confirmed":return(0,t.jsx)(m.A,{className:s});case"processing":return(0,t.jsx)(x.A,{className:s});case"shipped":return(0,t.jsx)(h.A,{className:s});case"delivered":return(0,t.jsx)(b.A,{className:s})}})(e.status,e.completed)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium ".concat(e.completed?"text-vibe-brown":"text-gray-500"),children:e.title}),e.timestamp&&(0,t.jsx)("span",{className:"text-sm text-vibe-brown/70",children:A(e.timestamp)})]}),(0,t.jsx)("p",{className:"mt-1 text-sm ".concat(e.completed?"text-vibe-brown/70":"text-gray-400"),children:e.description})]})]},e.status))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-4",children:"Shipping Address"}),(0,t.jsxs)("div",{className:"text-vibe-brown",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[j.order.shippingAddress.firstName," ",j.order.shippingAddress.lastName]}),(0,t.jsx)("p",{children:j.order.shippingAddress.address}),(0,t.jsxs)("p",{children:[j.order.shippingAddress.city,", ",j.order.shippingAddress.state," - ",j.order.shippingAddress.pincode]}),(0,t.jsxs)("p",{className:"mt-2",children:["Phone: ",j.order.shippingAddress.phone]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-4",children:"Order Items"}),(0,t.jsx)("div",{className:"space-y-4",children:j.order.items.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-vibe-bg rounded-lg",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex-shrink-0",children:e.image&&(0,t.jsx)(l.default,{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded-lg",width:64,height:64})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"font-semibold text-vibe-brown",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-vibe-brown/70",children:["Size: ",e.size," | Quantity: ",e.quantity]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"font-semibold text-vibe-brown",children:["₹",e.price*e.quantity]})})]},r))})]})]})]}),(0,t.jsx)(d.default,{})]})}let v=()=>(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-vibe-bg text-vibe-brown",children:"Loading..."}),children:(0,t.jsx)(g,{})})},4186:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6954:(e,r,s)=>{Promise.resolve().then(s.bind(s,3952))},7108:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9799:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])}},e=>{e.O(0,[874,197,814,441,964,358],()=>e(e.s=6954)),_N_E=e.O()}]);