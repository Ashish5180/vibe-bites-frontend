(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{2955:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(5155),r=s(2115),l=s(2971),i=s(454),d=s(5695),c=s(5899),n=s(4835),o=s(7108),x=s(9946);let m=(0,x.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var h=s(8564);let b=(0,x.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var p=s(6766),v=s(6874),u=s.n(v),g=s(9509);let w=()=>{let[e,t]=(0,r.useState)(null),[s,x]=(0,r.useState)(!0),[v,w]=(0,r.useState)([]),[N,j]=(0,r.useState)(!0),[f,y]=(0,r.useState)([]),[k,S]=(0,r.useState)(!0),A=(0,d.useRouter)(),{addToast:I}=(0,c.d)(),_=()=>{let e=localStorage.getItem("token");return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}};return(0,r.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("token"))return void A.push("/login");let e=await fetch("".concat(g.env.NEXT_PUBLIC_API_URL||"/api","/auth/profile"),{headers:_()}),s=await e.json();s.success?(t(s.data.user),localStorage.getItem("user")||localStorage.setItem("user",JSON.stringify(s.data.user))):(localStorage.removeItem("token"),localStorage.removeItem("user"),A.push("/login"))}catch(e){console.error("Profile load error:",e),I("Failed to load profile","error"),localStorage.removeItem("token"),localStorage.removeItem("user"),A.push("/login")}finally{x(!1)}})()},[A,I]),(0,r.useEffect)(()=>{(async()=>{j(!0);try{let e=await fetch("".concat(g.env.NEXT_PUBLIC_API_URL||"/api","/orders"),{headers:_()}),t=await e.json();t.success&&w(t.data.orders)}catch(e){console.error("Orders load error:",e)}finally{j(!1)}})()},[]),(0,r.useEffect)(()=>{(async()=>{S(!0);try{let e=await fetch("".concat(g.env.NEXT_PUBLIC_API_URL||"/api","/reviews/user"),{headers:_()}),t=await e.json();t.success&&y(t.data.reviews)}catch(e){console.error("Reviews load error:",e)}finally{S(!1)}})()},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-vibe-bg",children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("div",{className:"max-w-4xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 lg:py-16",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-vibe-brown mb-6",children:"My Profile"}),s?(0,a.jsx)("div",{className:"text-vibe-brown/70",children:"Loading..."}):e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-vibe-brown",children:"Profile Information"}),(0,a.jsxs)("button",{onClick:()=>A.push("/logout"),className:"flex items-center gap-2 px-4 py-2 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg transition-colors duration-200 font-medium",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),"Logout"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-vibe-brown/60 text-sm",children:"First Name"}),(0,a.jsx)("div",{className:"text-vibe-brown font-semibold",children:e.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-vibe-brown/60 text-sm",children:"Last Name"}),(0,a.jsx)("div",{className:"text-vibe-brown font-semibold",children:e.lastName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-vibe-brown/60 text-sm",children:"Email"}),(0,a.jsx)("div",{className:"text-vibe-brown font-semibold",children:e.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-vibe-brown/60 text-sm",children:"Phone"}),(0,a.jsx)("div",{className:"text-vibe-brown font-semibold",children:e.phone||"—"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-vibe-brown mb-4",children:"My Orders"}),N?(0,a.jsx)("div",{className:"text-vibe-brown/70",children:"Loading orders..."}):0===v.length?(0,a.jsx)("div",{className:"text-vibe-brown/70",children:"No orders found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-vibe-brown font-medium",children:e.orderNumber||e._id}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",e.total]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("delivered"===e.orderStatus?"bg-green-100 text-green-800":"shipped"===e.orderStatus?"bg-blue-100 text-blue-800":"processing"===e.orderStatus?"bg-yellow-100 text-yellow-800":"cancelled"===e.orderStatus?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.orderStatus})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{className:"px-3 py-1 bg-blue-100 text-blue-800 hover:bg-blue-200 rounded-md text-xs font-medium",onClick:()=>A.push("/track-order?orderId=".concat(e.orderNumber||e._id)),children:"Track Order"})})]},e._id))})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-vibe-brown mb-4",children:"My Reviews"}),k?(0,a.jsx)("div",{className:"text-vibe-brown/70",children:"Loading reviews..."}):0===f.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 text-vibe-brown/30 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-vibe-brown/70",children:"No reviews submitted yet."}),(0,a.jsx)("p",{className:"text-vibe-brown/50 text-sm mt-2",children:"Review products after they are delivered to help other customers!"})]}):(0,a.jsx)("div",{className:"space-y-6",children:f.map(e=>(0,a.jsx)("div",{className:"border border-vibe-cookie/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100",children:e.productImage?(0,a.jsx)(p.default,{src:e.productImage,alt:e.productName,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"h-8 w-8 text-vibe-brown/30"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)(u(),{href:"/product/".concat(e.productId),className:"font-semibold text-vibe-brown hover:text-vibe-cookie transition-colors flex items-center gap-1",children:[e.productName,(0,a.jsx)(m,{className:"h-3 w-3"})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.isActive?"Published":"Pending"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((t,s)=>(0,a.jsx)(h.A,{className:"h-4 w-4 ".concat(s<e.rating?"text-yellow-400 fill-current":"text-gray-300")},s))}),(0,a.jsxs)("span",{className:"text-sm text-vibe-brown/60",children:[e.rating,"/5"]})]}),(0,a.jsx)("h4",{className:"font-medium text-vibe-brown mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-vibe-brown/70 text-sm mb-3",children:e.comment}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-vibe-brown/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(b,{className:"h-3 w-3"}),new Date(e.createdAt).toLocaleDateString()]}),e.orderNumber&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),"Order: ",e.orderNumber]})]})]})]})},e.id))})]})]}):(0,a.jsx)("div",{className:"text-vibe-brown/70",children:"Unable to load profile"})]}),(0,a.jsx)(i.default,{})]})}},6377:(e,t,s)=>{Promise.resolve().then(s.bind(s,2955))},7108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},8564:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}},e=>{e.O(0,[874,197,814,441,964,358],()=>e(e.s=6377)),_N_E=e.O()}]);