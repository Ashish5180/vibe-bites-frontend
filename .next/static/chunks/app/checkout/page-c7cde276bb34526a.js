(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{646:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(9946).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2098:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>v});var t=i(5155),r=i(2115),a=i(6766),l=i(6874),n=i.n(l),o=i(2971),c=i(454),d=i(977),m=i(5899),x=i(5695),b=i(5169),u=i(9799),h=i(5525),p=i(646);let v=()=>{let{items:e,getCartTotal:s,appliedCoupon:i,removeCoupon:l,clearCart:v}=(0,d._)(),{addToast:f}=(0,m.d)(),g=(0,x.useRouter)(),[j,y]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",pincode:"",paymentMethod:"cod"}),[N,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(!1),S=e.reduce((e,s)=>e+s.price*s.quantity,0),A=s(),q=e=>{y({...j,[e.target.name]:e.target.value})},M=async()=>{if(!localStorage.getItem("token"))return f("Please login to place order","error"),g.push("/login"),null;let s={items:e.map(e=>({productId:e.id,size:e.selectedSize,quantity:e.quantity})),shippingAddress:{firstName:j.firstName,lastName:j.lastName,address:j.address,city:j.city,state:j.state,pincode:j.pincode,phone:j.phone},paymentMethod:j.paymentMethod,appliedCoupon:i||void 0};try{let e=await fetch("https://vibebitstest-env.eba-ubvupniq.ap-south-1.elasticbeanstalk.com/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},headers:(()=>{let e=localStorage.getItem("token");return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})(),body:JSON.stringify(s)}),i=await e.json();if(!e.ok||!i.success)return console.error("Order creation failed:",i),null;return i.data.order}catch(e){return console.error("Network error during order creation:",e),null}},P=async e=>{e.preventDefault(),C(!0);try{if("cod"===j.paymentMethod)await M()?(f("Order placed successfully!","success"),v(),g.push("/checkout/confirmation")):f("Failed to create order. Please try again.","error");else{let e=await M();e?w(e):f("Failed to create order. Please try again.","error")}}catch(e){console.error("Order creation error:",e),f("Something went wrong. Please try again.","error")}finally{C(!1)}};return 0===e.length?(0,t.jsxs)("div",{className:"min-h-screen bg-vibe-bg",children:[(0,t.jsx)(o.default,{}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-vibe-brown mb-4",children:"Your Cart is Empty"}),(0,t.jsx)("p",{className:"text-lg text-vibe-brown/70 mb-8",children:"Add some products to your cart before checkout."}),(0,t.jsxs)(n(),{href:"/products",className:"inline-flex items-center justify-center px-8 py-4 bg-vibe-cookie text-vibe-brown font-semibold rounded-full hover:bg-vibe-accent transition-colors duration-300",children:[(0,t.jsx)(b.A,{className:"mr-2 h-5 w-5"}),"Continue Shopping"]})]})}),(0,t.jsx)(c.default,{})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-vibe-bg",children:[(0,t.jsx)(o.default,{}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)(n(),{href:"/cart",className:"inline-flex items-center text-vibe-brown/70 hover:text-vibe-brown transition-colors mb-4",children:[(0,t.jsx)(b.A,{className:"mr-2 h-5 w-5"}),"Back to Cart"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-vibe-brown",children:"Checkout"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-6",children:"Shipping Information"}),(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"First Name"}),(0,t.jsx)("input",{type:"text",name:"firstName",value:j.firstName,onChange:q,required:!0,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"Last Name"}),(0,t.jsx)("input",{type:"text",name:"lastName",value:j.lastName,onChange:q,required:!0,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:j.email,onChange:q,required:!0,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"Phone"}),(0,t.jsx)("input",{type:"tel",name:"phone",value:j.phone,onChange:q,required:!0,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"Address"}),(0,t.jsx)("textarea",{name:"address",value:j.address,onChange:q,required:!0,rows:3,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:j.city,onChange:q,required:!0,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"State"}),(0,t.jsx)("input",{type:"text",name:"state",value:j.state,onChange:q,required:!0,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-2",children:"Pincode"}),(0,t.jsx)("input",{type:"text",name:"pincode",value:j.pincode,onChange:q,required:!0,className:"w-full px-4 py-2 border border-vibe-cookie/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-vibe-cookie"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-6",children:"Payment Method"}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("label",{className:"flex items-center p-4 border border-vibe-cookie/30 rounded-lg cursor-pointer hover:bg-vibe-bg transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"paymentMethod",value:"cod",checked:"cod"===j.paymentMethod,onChange:q,className:"mr-3"}),(0,t.jsx)(u.A,{className:"h-5 w-5 text-vibe-brown mr-3"}),(0,t.jsx)("span",{className:"text-vibe-brown",children:"Cash on Delivery"})]})})]})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-24",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-vibe-brown mb-6",children:"Order Summary"}),(0,t.jsx)("div",{className:"space-y-4 mb-6",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden flex-shrink-0",children:(0,t.jsx)(a.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-vibe-brown",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-vibe-brown/60",children:[e.selectedSize," \xd7 ",e.quantity]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"font-semibold text-vibe-brown",children:["₹",e.price*e.quantity]})})]},"".concat(e.id,"-").concat(e.selectedSize)))}),(0,t.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between text-vibe-brown/70",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["₹",S]})]}),i&&(0,t.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,t.jsxs)("span",{children:["Discount (",i.code,")"]}),(0,t.jsxs)("span",{children:["-₹",S-A]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-vibe-brown/70",children:[(0,t.jsx)("span",{children:"Shipping"}),(0,t.jsx)("span",{children:"Free"})]}),(0,t.jsx)("div",{className:"border-t border-vibe-brown/20 pt-3",children:(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold text-vibe-brown",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["₹",A]})]})})]}),(0,t.jsx)("button",{onClick:P,disabled:k,className:"w-full inline-flex items-center justify-center px-6 py-3 bg-vibe-cookie text-vibe-brown font-semibold rounded-full hover:bg-vibe-accent transition-colors duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-vibe-brown mr-2"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"mr-2 h-5 w-5"}),"Place Order (COD)"]})}),(0,t.jsxs)("div",{className:"mt-4 text-center text-sm text-vibe-brown/60",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 inline mr-1"}),"Secure checkout powered by VIBE BITES"]})]})})]})]}),(0,t.jsx)(c.default,{})]})}},4140:(e,s,i)=>{Promise.resolve().then(i.bind(i,2098))},5169:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5525:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(9946).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},9799:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(9946).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])}},e=>{e.O(0,[874,197,814,441,964,358],()=>e(e.s=4140)),_N_E=e.O()}]);