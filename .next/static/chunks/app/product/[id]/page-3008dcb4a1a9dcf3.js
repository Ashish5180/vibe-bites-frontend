(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{5169:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});let i=(0,t(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5690:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});let i=(0,t(9946).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},6415:(e,s,t)=>{Promise.resolve().then(t.bind(t,7465))},7465:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var i=t(5155),l=t(2115),r=t(5695),o=t(6766),a=t(6874),n=t.n(a),c=t(2971),d=t(454),x=t(977),b=t(9930),m=t(5899),h=t(5169),u=t(1976);let v=(0,t(9946).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var f=t(8564),j=t(5690),p=t(7809);function w(){var e,s,t,a,w,g,N,y;let[k,A]=(0,l.useState)(0),C=(0,r.useParams)(),{addToCart:z}=(0,x._)(),{addToWishlist:S,removeFromWishlist:P,items:E}=(0,b.n)(),{addToast:O}=(0,m.d)(),[F,L]=(0,l.useState)(null),[M,W]=(0,l.useState)(""),[_,D]=(0,l.useState)(1),[V,B]=(0,l.useState)(!0),[I,q]=(0,l.useState)(null),[H,R]=(0,l.useState)(!1),T=!!F&&E.some(e=>e.id===F.id),J=()=>{if(F)if(T)P(F.id),O("".concat(F.name," removed from wishlist"),"success");else{let e=F.sizes.find(e=>e.size===M)||F.sizes[0];S({id:F.id,name:F.name,image:F.image,price:(null==e?void 0:e.price)||0}),O("".concat(F.name," added to wishlist"),"success")}};if((0,l.useEffect)(()=>{(async()=>{if(null==C?void 0:C.id){B(!0),q(null);try{var e;let s=await fetch("https://vibebitstest-env.eba-ubvupniq.ap-south-1.elasticbeanstalk.com/api/products/".concat(C.id),{headers:{"Cache-Control":"no-cache"}});if(!s.ok)throw Error("Product not found");let t=await s.json();if(!t.success||!(null==(e=t.data)?void 0:e.product))throw Error("Invalid product data received");let i=t.data.product;L(i),i.sizes&&i.sizes.length>0&&W(i.sizes[0].size)}catch(e){console.error("Product fetch error:",e),q(e.message)}finally{B(!1)}}})()},[C.id]),V)return(0,i.jsx)("div",{className:"min-h-screen bg-vibe-bg flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-vibe-brown mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-vibe-brown text-lg",children:"Loading product..."})]})});if(I||!F)return(0,i.jsxs)("div",{className:"min-h-screen bg-vibe-bg",children:[(0,i.jsx)(c.default,{}),(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-vibe-brown mb-4",children:"Product Not Found"}),(0,i.jsx)("p",{className:"text-lg text-vibe-brown/70 mb-8",children:I||"The product you're looking for doesn't exist."}),(0,i.jsxs)(n(),{href:"/products",className:"inline-flex items-center justify-center px-8 py-4 bg-vibe-cookie text-vibe-brown font-semibold rounded-full hover:bg-vibe-accent transition-colors duration-300",children:[(0,i.jsx)(h.A,{className:"mr-2 h-5 w-5"}),"Back to Products"]})]})}),(0,i.jsx)(d.default,{})]});let G=(null==(e=F.sizes)?void 0:e.find(e=>e.size===M))||{},Q=G.price||0,Y=null!=(y=G.stock)?y:99;return(0,i.jsxs)("div",{className:"min-h-screen bg-vibe-bg",children:[(0,i.jsx)(c.default,{}),(0,i.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsx)("nav",{className:"mb-8","aria-label":"Breadcrumb",children:(0,i.jsxs)("ol",{className:"flex items-center space-x-2 text-sm text-vibe-brown/60",children:[(0,i.jsx)("li",{children:(0,i.jsx)(n(),{href:"/",className:"hover:text-vibe-brown",children:"Home"})}),(0,i.jsx)("li",{children:"/"}),(0,i.jsx)("li",{children:(0,i.jsx)(n(),{href:"/products",className:"hover:text-vibe-brown",children:"Products"})}),(0,i.jsx)("li",{children:"/"}),(0,i.jsx)("li",{children:(0,i.jsx)(n(),{href:"/products?category=".concat(null==(s=F.category)?void 0:s.toLowerCase()),className:"hover:text-vibe-brown",children:F.category})}),(0,i.jsx)("li",{children:"/"}),(0,i.jsx)("li",{className:"text-vibe-brown font-medium",children:F.name})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,i.jsxs)("div",{className:"relative h-96 lg:h-[500px] rounded-2xl overflow-hidden shadow-2xl flex flex-col",children:[F.images&&F.images.length>1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.default,{src:F.images[k]||F.image||"/images/hero-snack-1.jpg",alt:F.name||"Product",fill:!0,className:"object-cover",priority:!0}),(0,i.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:F.images.map((e,s)=>(0,i.jsx)("button",{className:"w-3 h-3 rounded-full ".concat(k===s?"bg-vibe-brown":"bg-vibe-cookie"),onClick:()=>A(s),"aria-label":"Go to image ".concat(s+1)},s))}),(0,i.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[(0,i.jsx)("button",{className:"p-2 bg-white/80 rounded-full hover:bg-white transition-colors","aria-label":"Add to wishlist",onClick:J,children:(0,i.jsx)(u.A,{className:"h-5 w-5 transition-colors ".concat(T?"text-red-500 fill-current":"text-vibe-brown hover:text-red-500")})}),(0,i.jsx)("button",{className:"p-2 bg-white/80 rounded-full hover:bg-white transition-colors","aria-label":"Share",onClick:()=>{navigator.share?navigator.share({title:F.name,text:F.description,url:window.location.href}).then(()=>O("Product shared!","success")).catch(()=>O("Share cancelled","info")):(navigator.clipboard.writeText(window.location.href),O("Product link copied!","success"))},children:(0,i.jsx)(v,{className:"h-5 w-5 text-vibe-brown"})})]}),F.featured&&(0,i.jsx)("div",{className:"absolute top-4 left-4",children:(0,i.jsxs)("div",{className:"flex items-center bg-vibe-cookie text-vibe-brown px-3 py-1 rounded-full text-sm font-semibold",children:[(0,i.jsx)(f.A,{className:"h-4 w-4 fill-current mr-1"}),"Featured"]})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.default,{src:F.image||F.images&&F.images[0]||"/images/hero-snack-1.jpg",alt:F.name||"Product",fill:!0,className:"object-cover",priority:!0}),(0,i.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[(0,i.jsx)("button",{className:"p-2 bg-white/80 rounded-full hover:bg-white transition-colors",onClick:J,children:(0,i.jsx)(u.A,{className:"h-5 w-5 transition-colors ".concat(T?"text-red-500 fill-current":"text-vibe-brown hover:text-red-500")})}),(0,i.jsx)("button",{className:"p-2 bg-white/80 rounded-full hover:bg-white transition-colors",children:(0,i.jsx)(v,{className:"h-5 w-5 text-vibe-brown"})})]}),F.featured&&(0,i.jsx)("div",{className:"absolute top-4 left-4",children:(0,i.jsxs)("div",{className:"flex items-center bg-vibe-cookie text-vibe-brown px-3 py-1 rounded-full text-sm font-semibold",children:[(0,i.jsx)(f.A,{className:"h-4 w-4 fill-current mr-1"}),"Featured"]})})]}),F.video&&F.video.trim()&&(0,i.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,i.jsxs)("button",{onClick:()=>R(!H),className:"flex items-center gap-2 px-4 py-2 bg-white/90 rounded-full hover:bg-white transition-colors shadow-lg",children:[(0,i.jsx)(j.A,{className:"h-4 w-4 text-vibe-brown fill-current"}),(0,i.jsx)("span",{className:"text-sm font-medium text-vibe-brown",children:H?"Hide Video":"Watch Video"})]})})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,i.jsx)(f.A,{className:"h-5 w-5 text-yellow-400 fill-current"},s)),(0,i.jsxs)("span",{className:"ml-2 text-vibe-brown/60",children:[F.rating||0," (",F.reviewCount||0," reviews)"]})]}),(0,i.jsxs)("div",{className:"text-3xl font-bold text-vibe-brown",children:["₹",Q,M&&(0,i.jsxs)("span",{className:"text-lg text-vibe-brown/60 ml-2",children:["/ ",M]})]}),F.sizes&&F.sizes.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-3",children:"Select Size"}),(0,i.jsx)("div",{className:"flex gap-3",children:F.sizes.map(e=>(0,i.jsxs)("button",{onClick:()=>W(e.size),className:"px-6 py-3 rounded-lg border-2 transition-colors ".concat(M===e.size?"bg-vibe-cookie text-vibe-brown border-vibe-cookie":"border-vibe-cookie/30 text-vibe-brown hover:border-vibe-cookie"),children:[(0,i.jsx)("div",{className:"font-semibold",children:e.size}),(0,i.jsxs)("div",{className:"text-sm",children:["₹",e.price]})]},e.size))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-vibe-brown mb-3",children:"Quantity"}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>D(Math.max(1,_-1)),className:"w-10 h-10 rounded-full bg-vibe-cookie text-vibe-brown hover:bg-vibe-accent transition-colors flex items-center justify-center",disabled:_<=1,children:"-"}),(0,i.jsx)("span",{className:"text-xl font-semibold text-vibe-brown w-12 text-center",children:_}),(0,i.jsx)("button",{onClick:()=>D(Math.min(Y,_+1)),className:"w-10 h-10 rounded-full bg-vibe-cookie text-vibe-brown hover:bg-vibe-accent transition-colors flex items-center justify-center",disabled:_>=Y,children:"+"}),0===G.stock&&(0,i.jsx)("span",{className:"text-red-500 ml-2",children:"Out of Stock"}),G.stock>0&&(0,i.jsxs)("span",{className:"text-vibe-brown/60 ml-2",children:["Stock: ",G.stock]})]})]}),(0,i.jsxs)("button",{onClick:()=>{if(!M)return void O("Please select a size","error");if(0===G.stock)return void O("Selected size is out of stock","error");if(_>Y){O("Only ".concat(Y," left in stock"),"error"),D(Y);return}z(F,M,_),O("".concat(F.name," added to cart!"),"success"),D(1)},disabled:!M||0===G.stock,className:"w-full inline-flex items-center justify-center px-8 py-4 bg-vibe-cookie text-vibe-brown font-semibold rounded-full hover:bg-vibe-accent transition-colors duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,i.jsx)(p.A,{className:"mr-2 h-5 w-5"}),0===G.stock?"Out of Stock":"Add to Cart - ₹".concat(Q*_)]}),(0,i.jsxs)("div",{className:"space-y-6 pt-8 border-t border-vibe-cookie/20",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-vibe-brown mb-3",children:"Ingredients"}),(0,i.jsx)("p",{className:"text-vibe-brown/70",children:F.ingredients||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-vibe-brown mb-3",children:"Nutrition Facts"}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[["Calories",null==(t=F.nutrition)?void 0:t.calories],["Protein",null==(a=F.nutrition)?void 0:a.protein],["Carbs",null==(w=F.nutrition)?void 0:w.carbs],["Fat",null==(g=F.nutrition)?void 0:g.fat],["Fiber",null==(N=F.nutrition)?void 0:N.fiber]].map(e=>{let[s,t]=e;return(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-vibe-brown/70",children:s}),(0,i.jsx)("span",{className:"font-semibold text-vibe-brown",children:t||"N/A"})]},s)})})]})]})]})]}),H&&F.video&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"relative w-full max-w-4xl bg-white rounded-lg overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-vibe-brown",children:"Product Video"}),(0,i.jsx)("button",{onClick:()=>R(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,i.jsx)("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:(0,i.jsx)("video",{src:F.video,controls:!0,autoPlay:!0,className:"absolute inset-0 w-full h-full",onError:()=>{R(!1),O("Video failed to load","error")},children:"Your browser does not support the video tag."})})]})})]}),(0,i.jsx)(d.default,{})]})}},8564:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});let i=(0,t(9946).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9930:(e,s,t)=>{"use strict";t.d(s,{WishlistProvider:()=>a,n:()=>n});var i=t(5155),l=t(2115);let r=(0,l.createContext)(),o=(e,s)=>{switch(s.type){case"LOAD":return s.payload;case"ADD":if(e.find(e=>e.id===s.payload.id))return e;return[...e,s.payload];case"REMOVE":return e.filter(e=>e.id!==s.payload.id);default:return e}},a=e=>{let{children:s}=e,[t,a]=(0,l.useReducer)(o,[]);return(0,l.useEffect)(()=>{let e=localStorage.getItem("vibe-bites-wishlist");e&&a({type:"LOAD",payload:JSON.parse(e)})},[]),(0,l.useEffect)(()=>{localStorage.setItem("vibe-bites-wishlist",JSON.stringify(t))},[t]),(0,i.jsx)(r.Provider,{value:{items:t,addToWishlist:e=>a({type:"ADD",payload:e}),removeFromWishlist:e=>a({type:"REMOVE",payload:{id:e}})},children:s})},n=()=>{let e=(0,l.useContext)(r);if(!e)throw Error("useWishlist must be used within a WishlistProvider");return e}}},e=>{e.O(0,[874,197,814,441,964,358],()=>e(e.s=6415)),_N_E=e.O()}]);